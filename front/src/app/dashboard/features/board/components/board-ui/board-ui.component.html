<jira-feature-page-container
  [breadcrumbs]="[
    {
      label: 'Projects',
      route: 'projects'
    },
    {
      label: project?.Name,
      route: project?.Id
    },
    {
      label: 'Board',
      route: 'board'
    }
  ]"
>
  <div class="text-3xl font-normal pb-2 border border-blue-500 resize-x">
    Board
  </div>

  <div class="flex items-center justify-between mb-4">
    <jira-board-filters
      [members]="projectMembers"
      [statusList]="project?.AllTaskStatus"
      [typeList]="project?.TaskTypes"
      (filtersChange)="filtersChange.emit($event)"
    ></jira-board-filters>

    <jira-create-sprint-button></jira-create-sprint-button>
  </div>
  <div class="flex flex-grow gap-4 max-h-full overflow-hidden">
    <div class="flex flex-col flex-grow gap-4 overflow-auto">
      <ng-container
        *ngFor="
          let sprintWithTasks of sprintWithTasksList;
          trackBy: trackBySprintId
        "
      >
        <jira-sprint
          *ngIf="!(sprintWithTasks.Sprint.completed$ | async)"
          [project]="project"
          [tasks]="sprintWithTasks.Tasks"
          [sprint]="sprintWithTasks.Sprint"
          (taskClicked)="updateTaskSelected($event)"
        ></jira-sprint>
      </ng-container>
    </div>

    <jira-task-details
      class="flex-grow-[1] flex-shrink-1 overflow-auto"
      style="flex-basis: 25%; max-width: 24%"
      *ngIf="taskSelected"
      [task]="taskSelected"
      [project]="project"
      [members]="projectMembers"
      [sprints]="sprintInfoList"
      [withCloseIcon]="true"
      (crossClicked)="resetTaskSelected()"
    >
    </jira-task-details>
  </div>
</jira-feature-page-container>
